---
import Layout from "../../layouts/Layout.astro";
import Main from "../../components/Main.astro";
import H1 from "../../components/H1.astro";

let res = await fetch("https://mayfairfinanceaustralia.com/wp-json/wp/v2/posts");
let posts = await res.json();
---

<Layout title="Home page">
    <Main>
        <H1 text="Blog index page, getting data from WordPress API" />

        Data comes from here: <a href="https://mayfairfinanceaustralia.com/wp-json/wp/v2/posts">https://mayfairfinanceaustralia.com/wp-json/wp/v2/posts</a>

        <br />
        <br />
        <br />

        {
            posts.map((post) => (
                <article>
                    <h2>
                        <a
                            href={`/blog/${post.slug}/`}
                            set:html={post.title.rendered}
                        />
                    </h2>
                </article>
            ))
        }
    </Main>
</Layout>
